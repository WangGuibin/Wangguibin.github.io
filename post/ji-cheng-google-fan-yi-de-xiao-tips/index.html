
<!DOCTYPE html>
<html>
  <head>
    
<meta charset="utf-8" >

<title>é›†æˆgoogleç¿»è¯‘çš„å°tips | CoderWGB&#39;s Blog</title>
<meta name="description" content="ä¸šç²¾äºå‹¤è’äºå¬‰">

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.0/animate.min.css">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="shortcut icon" href="http://wangguibin.github.io/favicon.ico?v=1560867932392">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="http://wangguibin.github.io/styles/main.css">


  
    <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css" />
  

  


<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>



  </head>
  <body>
    <div id="app" class="main">
      <div class="site-header-container">
  <div class="site-header">
    <div class="left">
      <a href="http://wangguibin.github.io">
        <img class="avatar" src="http://wangguibin.github.io/images/avatar.png?v=1560867932392" alt="" width="32px" height="32px">
      </a>
      <a href="http://wangguibin.github.io">
        <h1 class="site-title">CoderWGB&#39;s Blog</h1>
      </a>
    </div>
    <div class="right">
      <transition name="fade">
        <i class="icon" :class="{ 'icon-close-outline': menuVisible, 'icon-menu-outline': !menuVisible }" @click="menuVisible = !menuVisible"></i>
      </transition>
    </div>
  </div>
</div>

<transition name="fade">
  <div class="menu-container" style="display: none;" v-show="menuVisible">
    <div class="menu-list">
      
        
          <a href="/" class="menu purple-link">
            é¦–é¡µ
          </a>
        
      
        
          <a href="/archives" class="menu purple-link">
            å½’æ¡£
          </a>
        
      
        
          <a href="/tags" class="menu purple-link">
            æ ‡ç­¾
          </a>
        
      
        
          <a href="/post/about" class="menu purple-link">
            å…³äº
          </a>
        
      
    </div>
  </div>
</transition>


      <div class="content-container">
        <div class="post-detail">
          
            <div class="feature-container" style="background-image: url('http://wangguibin.github.io/post-images/ji-cheng-google-fan-yi-de-xiao-tips.png')">
            </div>
          
          <h2 class="post-title">é›†æˆgoogleç¿»è¯‘çš„å°tips</h2>
          <div class="post-info post-detail-info">
            <span><i class="icon-calendar-outline"></i> 2018-08-04</span>
            
              <span>
                <i class="icon-pricetags-outline"></i>
                
                  <a href="http://wangguibin.github.io/tag/XXba-wIhP">
                    æ•ˆç‡
                    
                      ï¼Œ
                    
                  </a>
                
                  <a href="http://wangguibin.github.io/tag/uojQ_lMmq">
                    Objective-C
                    
                      ï¼Œ
                    
                  </a>
                
                  <a href="http://wangguibin.github.io/tag/5E2uUQVL2">
                    å­¦ä¹ æ€»ç»“
                    
                      ï¼Œ
                    
                  </a>
                
                  <a href="http://wangguibin.github.io/tag/k2TvoAzJc">
                    iOS
                    
                  </a>
                
              </span>
            
          </div>
          <div class="post-content">
            <p>googleç¿»è¯‘çš„å¼ºå¤§,å°±åƒæˆ‘ä»¬å…¬å¸çš„slogan : &quot;è®©è¯­è¨€æ— å›½ç•Œ,è®©ä¸–äººå¿ƒç›¸é€š&quot;</p>
<!-- more -->
<p><img src="http://wangguibin.github.io/post-images/1560697872361.png" alt=""></p>
<h5 id="å‹æƒ…æç¤º-googleç›¸å…³çš„æœåŠ¡éƒ½æ˜¯éœ€è¦ç¿»å¢™çš„ä¸ç„¶åœ¨å¤§é™†æ— æ³•è®¿é—®"><em>å‹æƒ…æç¤º: googleç›¸å…³çš„æœåŠ¡éƒ½æ˜¯éœ€è¦ç¿»å¢™çš„,ä¸ç„¶åœ¨å¤§é™†æ— æ³•è®¿é—®</em></h5>
<p>å†™è¿™ç¯‡æ–‡ç« çš„ç›®çš„å°±æ˜¯ä¸ºäº†æ•´åˆä¸€ä¸‹è¿™æ–¹é¢çš„èµ„æ–™, å¤§æ¦‚æ˜¯å› ä¸ºè¢«å¢™,ç½‘ä¸Šå…³äºè¿™æ–¹é¢çš„èµ„æ–™å¾ˆå°‘,æœ‰äº›æ˜¯è¿‡äºè€æ—§,ç”šè‡³æ˜¯ä¸é€‚ç”¨çš„,æ‰€ä»¥å°±ä¸å¾—ä¸åšä¸ªç¬”è®°å°±å½“ä½œæ˜¯æ¢æ¢è·¯ã€‚</p>
<h1 id="googleè¯­éŸ³è¯†åˆ«">googleè¯­éŸ³è¯†åˆ«</h1>
<ol>
<li>åˆ°<code>google</code>æ³¨å†Œç›¸å…³çš„<code>API_KEY</code>, åœ°å€: <code>https://cloud.google.com/speech-to-text/docs/samples</code></li>
<li>ä¸‹è½½demo  <code>https://github.com/GoogleCloudPlatform/ios-docs-samples/tree/master/speech/Objective-C/Speech-REST-Nonstreaming</code></li>
<li>å½•åˆ¶è¯­éŸ³æ–‡ä»¶å­˜äºæ²™ç›’, ä¸Šä¼ è¯­éŸ³æ–‡ä»¶åˆ° <code>https://speech.googleapis.com/v1/speech:recognize?key=xxxxx</code></li>
</ol>
<h3 id="æ ¸å¿ƒä»£ç ">æ ¸å¿ƒä»£ç :</h3>
<pre><code class="language-objectivec">  NSString *service = @&quot;https://speech.googleapis.com/v1/speech:recognize&quot;;
  service = [service stringByAppendingString:@&quot;?key=&quot;];
  service = [service stringByAppendingString:API_KEY];

  NSData *audioData = [NSData dataWithContentsOfFile:[self soundFilePath]];//æ²™ç›’é‡Œçš„å½•éŸ³æ–‡ä»¶ å…·ä½“çœ‹googleæä¾›çš„demo
  NSDictionary *configRequest = @{@&quot;encoding&quot;:@&quot;LINEAR16&quot;,
                                  @&quot;sampleRateHertz&quot;:@(SAMPLE_RATE),
                                  @&quot;languageCode&quot;:@&quot;zh-cn&quot;,
                                  @&quot;maxAlternatives&quot;:@30};
  NSDictionary *audioRequest = @{@&quot;content&quot;:[audioData base64EncodedStringWithOptions:0]};
  NSDictionary *requestDictionary = @{@&quot;config&quot;:configRequest,
                                      @&quot;audio&quot;:audioRequest};
  NSError *error;
  NSData *requestData = [NSJSONSerialization dataWithJSONObject:requestDictionary
                                                        options:0
                                                          error:&amp;error];

  NSString *path = service;
  NSURL *URL = [NSURL URLWithString:path];
  NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:URL];
  // if your API key has a bundle ID restriction, specify the bundle ID like this:
  [request addValue:[[NSBundle mainBundle] bundleIdentifier] forHTTPHeaderField:@&quot;X-Ios-Bundle-Identifier&quot;];
  NSString *contentType = @&quot;application/json&quot;;
  [request addValue:contentType forHTTPHeaderField:@&quot;Content-Type&quot;];
  [request setHTTPBody:requestData];
  [request setHTTPMethod:@&quot;POST&quot;];

  NSURLSessionTask *task =
  [[NSURLSession sharedSession]
   dataTaskWithRequest:request
   completionHandler:
   ^(NSData *data, NSURLResponse *response, NSError *error) {
     dispatch_async(dispatch_get_main_queue(),
                    ^{
                      NSString *stringResult = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
                      _textView.text = stringResult;
                      NSLog(@&quot;RESULT: %@ &quot;, stringResult);
                    });
   }];
  [task resume];

</code></pre>
<h1 id="google-æ–‡æœ¬ç¿»è¯‘">google æ–‡æœ¬ç¿»è¯‘</h1>
<p>æ–‡æœ¬ç¿»è¯‘å’Œè¯­éŸ³è¯†åˆ«ç±»ä¼¼,éƒ½éœ€è¦<code>API_KEY</code>,åŒæ ·æ˜¯POSTè¯·æ±‚</p>
<pre><code class="language-objectivec">/**
 MARK:- æ–‡æœ¬äº’è½¬

 @param text æ–‡æœ¬
 @param targetCode ç¿»è¯‘çš„å¯¹åº”è¯­è¨€ä»£ç 
 @param callBack å›è°ƒç»“æœjsonå­—ç¬¦ä¸²
 */
- (void)translateOriginText:(NSString *)text
								 targetCode:(NSString *)targetCode
									 callBack:(void(^)(NSString *objStr))callBack{
	NSString *urlStr = [NSString stringWithFormat:@&quot;https://translation.googleapis.com/language/translate/v2?key=%@&quot;,API_KEY];
	NSURL *URL = [NSURL URLWithString: urlStr];
	NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:URL];
	[request addValue:[[NSBundle mainBundle] bundleIdentifier] forHTTPHeaderField:@&quot;X-Ios-Bundle-Identifier&quot;];
	NSString *contentType = @&quot;application/json&quot;;
	[request addValue:contentType forHTTPHeaderField:@&quot;Content-Type&quot;];
// q: åŸæ–‡æœ¬  tagret: ç›®æ ‡è¯­è¨€çš„ä»£ç  zh-cn,en-us...ç­‰
	NSDictionary *requestDictionary = @{  @&quot;q&quot; : text, @&quot;target&quot; : targetCode };
	NSError *error;
	NSData *requestData = [NSJSONSerialization dataWithJSONObject:requestDictionary options:0 error:&amp;error];
	[request setHTTPBody:requestData];
	[request setHTTPMethod:@&quot;POST&quot;];
	NSURLSessionTask *task =
	[[NSURLSession sharedSession]
	 dataTaskWithRequest:request
	 completionHandler:
	 ^(NSData *data, NSURLResponse *response, NSError *error) {
		 dispatch_async(dispatch_get_main_queue(),
										^{
											NSString *stringResult = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
											NSLog(@&quot;RESULT: %@ &quot;, stringResult);
											!callBack? : callBack(stringResult);
										});
	 }];
	[task resume];
}

</code></pre>
<h1 id="google-è¯­éŸ³åˆæˆ">google è¯­éŸ³åˆæˆ</h1>
<ul>
<li>åˆæˆæ˜¯å…è´¹çš„ , ç„¶åæ˜¯è¿™ä¸ªæ¥å£  <code>http://translate.google.com/translate_tts?ie=UTF-8&amp;client=tw-ob&amp;ttsspeed=1</code></li>
<li>å‚æ•°ç»„æˆ</li>
</ul>
<pre><code>//åŸºåœ°å€
BASE_URL = @&quot;http://translate.google.com/translate_tts?ie=UTF-8&amp;client=tw-ob&amp;ttsspeed=1&quot;

//æ‹¼æ¥è§„åˆ™å’Œgetè¯·æ±‚ç±»ä¼¼
total   //æ ‡å‡†ä¸º100ä¸ªå­—ç¬¦ä¸ºä¸€ç»„ ç„¶åtotalæ˜¯æ€»å…±å¤šå°‘ç»„ 
idx    //ä¸‹æ ‡,ç¬¬å‡ ç»„
textlen  //æ‰€æœ‰æ–‡å­—çš„è®¡æ•°,å°±æ˜¯è¿™ä¸ªå­—ç¬¦ä¸²çš„é•¿åº¦
q     //åˆæˆçš„æ–‡å­—å†…å®¹,ä¸­æ–‡çš„è¯éœ€è¦è½¬ç¼–ç utf-8æœ€ä¸ºåˆé€‚
tl  //è¯­è¨€ï¼Œè·Ÿè¯†åˆ«çš„è¯­è¨€ä¸€è‡´
</code></pre>
<p>ä¸»è¦å‚æ•°ä»‹ç»:
<code>ie</code>: è¾“å…¥å‚æ•°ç¼–ç  <code>input-encode</code> ä¸€èˆ¬ä¸º<code>utf-8</code>
<code>oe</code>: è¾“å…¥å‚æ•°ç¼–ç  <code>output-encode</code> ä¸€èˆ¬ä¸º<code>utf-8</code>
<code>ttsspeed</code>: åˆæˆçš„è¯­é€Ÿ
<code>tl</code>: ç›®æ ‡è¯­è¨€ä»£ç  <code>target language</code>
<code>hl</code>: å½“åœ°è¯­è¨€ä»£ç  <code>home language</code></p>
<p>urlç¼–ç å‰:
<code>http://translate.google.com/translate_tts?ie=UTF-8&amp;client=tw-ob&amp;ttsspeed=1&amp;total=1&amp;idx=1&amp;textlen=6&amp;q=æŸæŸæŸæ˜¯å‚»é€¼&amp;tl=zh-cn</code>
urlç¼–ç å:
<code>http://translate.google.com/translate_tts?ie=UTF-8&amp;client=tw-ob&amp;ttsspeed=1&amp;total=1&amp;idx=1&amp;textlen=6&amp;q=%E9%99%88%E8%89%AF%E8%89%AF%E6%98%AF%E5%82%BB%E9%80%BC&amp;tl=zh-cn</code></p>
<h3 id="æ ¸å¿ƒä»£ç -2">æ ¸å¿ƒä»£ç </h3>
<pre><code>///MARK:- æ–‡æœ¬ è½¬ è¯­éŸ³åœ¨çº¿åˆæˆ
- (void)synthesisAudioWithTranslateWithText:(NSString *)text{
    NSString *baseUrl = @&quot;http://translate.google.com/translate_tts?ie=UTF-8&amp;client=tw-ob&amp;ttsspeed=1&quot;;
 //urlç¼–ç 
    NSCharacterSet *encodeUrlSet = [NSCharacterSet URLQueryAllowedCharacterSet];
    NSString *encodeContent = [text stringByAddingPercentEncodingWithAllowedCharacters:encodeUrlSet];
    NSString *urlStr = [NSString stringWithFormat:@&quot;%@&amp;total=1&amp;idx=1&amp;textlen=%ld&amp;q=%@&amp;tl=%@&quot;,baseUrl,text.length,encodeContent,self.targetCode];
    NSURL *url = [NSURL URLWithString: urlStr];
      //æ’­æ”¾æ‹¼æ¥çš„é“¾æ¥ 
	UIWebView *web = [[UIWebView alloc] init];
	web.hidden = YES;
	[self.view addSubview: web];
	NSURLRequest *req = [[NSURLRequest alloc] initWithURL:url];
	[web loadRequest: req];
}
</code></pre>
<h3 id="ä¸»æµçš„å‡ ç§è¯­è¨€çš„ä»£ç å¯¹ç…§è¡¨">ä¸»æµçš„å‡ ç§è¯­è¨€çš„ä»£ç å¯¹ç…§è¡¨:</h3>
<table>
<thead>
<tr>
<th style="text-align:center">å›½å®¶</th>
<th style="text-align:center">languageCode</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">ğŸ‡¨ğŸ‡³ä¸­æ–‡(ç®€ä½“)</td>
<td style="text-align:center"><code>zh-cn</code></td>
</tr>
<tr>
<td style="text-align:center">ğŸ‡¨ğŸ‡³ä¸­æ–‡(ç¹ä½“)</td>
<td style="text-align:center"><code>zh-tw</code></td>
</tr>
<tr>
<td style="text-align:center">ğŸ‡ºğŸ‡¸è‹±æ–‡(ç¾å¼)</td>
<td style="text-align:center"><code>en-us</code></td>
</tr>
<tr>
<td style="text-align:center">ğŸ‡¬ğŸ‡§è‹±æ–‡(è‹±å¼)</td>
<td style="text-align:center"><code>en-gb</code></td>
</tr>
<tr>
<td style="text-align:center">ğŸ‡¯ğŸ‡µæ—¥è¯­</td>
<td style="text-align:center"><code>ja</code></td>
</tr>
<tr>
<td style="text-align:center">ğŸ‡°ğŸ‡·éŸ©è¯­</td>
<td style="text-align:center"><code>ko</code></td>
</tr>
<tr>
<td style="text-align:center">ğŸ‡·ğŸ‡ºä¿„è¯­</td>
<td style="text-align:center"><code>ru</code></td>
</tr>
<tr>
<td style="text-align:center">ğŸ‡ªğŸ‡¸è¥¿ç­ç‰™è¯­</td>
<td style="text-align:center"><code>es</code></td>
</tr>
<tr>
<td style="text-align:center">ğŸ‡«ğŸ‡·æ³•è¯­</td>
<td style="text-align:center"><code>fr</code></td>
</tr>
<tr>
<td style="text-align:center">ğŸ‡©ğŸ‡ªå¾·è¯­</td>
<td style="text-align:center"><code>de</code></td>
</tr>
</tbody>
</table>

          </div>
        </div>

        
          <div class="next-post">
            <a class="purple-link" href="http://wangguibin.github.io/post/xcode-fu-zhu-gong-ju-zhi-re-chong-zai-cha-jian-li-qi">
              <h3 class="post-title">
                ä¸‹ä¸€ç¯‡ï¼šXcodeè¾…åŠ©å·¥å…·ä¹‹çƒ­é‡è½½æ’ä»¶åˆ©å™¨
              </h3>
            </a>
          </div>
          
      </div>

      
        
          <div id="gitalk-container"></div>
        

        
      

      <div class="site-footer">
  <div class="slogan">ä¸šç²¾äºå‹¤è’äºå¬‰</div>
  <div class="social-container">
    
      
    
      
    
      
    
      
    
      
    
  </div>
  Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a> | <a class="rss" href="http://wangguibin.github.io/atom.xml" target="_blank">RSS</a>
</div>


    </div>
    <script type="application/javascript">

hljs.initHighlightingOnLoad()

var app = new Vue({
  el: '#app',
  data: {
    menuVisible: false,
  },
})

</script>



  
    <script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
    <script>

      var gitalk = new Gitalk({
        clientID: 'a8ee2e4211f0c00c07c5',
        clientSecret: '99fd04bd90aa55b1b44067c721b41b0f0d899e3f',
        repo: 'Wangguibin.github.io',
        owner: 'WangGuibin',
        admin: ['WangGuibin'],
        id: (location.pathname).substring(0, 49),      // Ensure uniqueness and length less than 50
        distractionFreeMode: false  // Facebook-like distraction free mode
      })

      gitalk.render('gitalk-container')

    </script>
  

  




  </body>
</html>
